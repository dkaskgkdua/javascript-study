# 원시값의 메서드
자바스크립트는 원시값(문자열, 숫자 등)을 마치 객체처럼 다룰 수 있게 해준다. 원시값에서도 객체에서처럼 메서드를 호출할 수 있는 것이다. 
원시값과 객체는 다음과 같은 차이점이 있다.

> | 원시값 | 객체 |
> | -------|------|
> | 원시형 | 프로퍼티에 다양한 종류의 값 저장 가능 |
> | 문자형(string), 숫자(number), bigint, boolean, symbol, null, undefined | `{ }` 대괄호를 이용하여 만듬. 함수도 객체의 일종 |

객체는 아래외 예시처럼 함수를 프로퍼티로 저장하는 장점도 있다.
```js
// 객체 mj에 함수 sayHi를 정의 
let mj = {
  name: "MinJun",
  sayHi: function() {
    alert('하이 코딩하자!');
  }
};

john.sayHi(); // 하이 코딩하자!
```

객체는 위와 같이 다양한 프로퍼티 타입을 추가할 수 있는데 이런 기능을 많이 사용하면 자원이 많이 소모된다는 단점도 있다.
객체는 원시값보다 무겁고, 내부 구조를 유지하기 위해 추가 자원을 사용하기 때문이다.

### 원시값을 객체처럼 사용하기
자바스크립트 창안자는 아래와 같은 모순적인 상황을 해결해야 했다.

* 문자열이나 숫자와 같은 원시값을 다루어야 하는 작업이 많은데, 메서드를 사용하면 작업을 수얼하게 할 수 있을 것 같다는 생각
* 그런데 원시값은 가능한 한 빠르고 가벼워야 하는 것

그래서 아래와 같은 방법으로 해결책을 모색했다.
* 원시값은 원시값 그대로 남겨둬 단일 값 형태를 유지
* 문자열, 숫자, 불린, 심볼의 메서드와 프로퍼티에 접근할 수 있도록 언어 차원에서 허용
* 이를 가능하게 하기 위해, 원시값이 메서드나 프로퍼티에 접근하려 하면 추가 기능을 제공해주는 특수한 객체, `원시 래퍼 객체`를 만들어 준다. 이 객체는 곧 삭제된다.

`래퍼 객체`는 원시 타입에 따라 종류가 다양하다. 각 래퍼 객체는 원시 자료형의 이름을 그대로 차용해, `String, Number, Boolean, Symbol`이라고 부른다. 래퍼 객체마다 제공하는 메서드 역시 다르다.

인수로 받은 문자열의 모든 글자를 대문자로 바꿔주는 **str.toUpperCase()**를 예로 들겠다.
```js
let str = "Hello";

console.log(str.toUpperCase()); // HELLO
```
> #### 프로세스
> 1. 문자열 `str`은 원시값이므로 원시값 프로퍼티(toUpperCase)에 접근하는 순간 특별한 객체가 만들어진다. 이 객체는 문자열의 값을 알고 있고 `toUpperCase()`와 같은 유용한 메서드를 가지고 있다.
> 2. 메서드가 실행되고, 새로운 문자열이 반환된다.
> 3. 특별한 객체는 파괴되고, 원시값 str만 남는다.

이런 과정을 통해 원시값을 가볍게 유지하면서 메서드를 호출할 수 있는 것이다.

자바스크립트 엔진은 위 프로세스의 최적화에 많은 신경을 쓴다. 원시 래퍼 객체를 만들지 않고도 마치 원시래퍼 객체를 생성한 것 처럼 동작하게 해준다.

> * `String/Number/Boolean`를 생성자론 쓰지 말자!
> Java 등의 몇몇 언어에서는 `new Integer(1)` 또는 `new Boolean(false)`와 같은 문법을 사용해 원하는 타입의 `래퍼 객체`를 직접 만들 수 있다.
> 자바스크립트에서도 하위 호환성을 위해 남겨두었는데 이런 것은 추천하지 않는다. 이유는 아래와 같다.
> ```js
> alert( typeof 0 ); // number
> alert( typeof new Number(0)); // object
> 
> //객체는 논리 평가 시 항상 참을 반환하기 때문에, 아래 예시에서 얼럿창은 무조건 열린다.
> let zero = new Number(0);
>
> if(zero) { // zero는 객체이므로 항상 참이 된다.
>   alert("이게 맞나요?");
> }  
> ```
> 하지만 `new`를 안붙이고 `String/Number/Boolean`을 사용하는 건 괜찮다. 이는 원시값으로 바꿔주기 때문이다.
> ```js
> let num = Number("123");
> ```

* 참고로 `null / undefined`는 메서드가 없다.
특수 자료형인 `null`과 `undefined`의 원시값(`null/undefined`)은 위와 같은 법칙을 따르지 않는다. 래퍼 객체도 없고 메서드도 없다. 어떤 의미에선 가장 원시적이라고 할 수 있다.

## 문자열에 프로퍼티를 추가할 수 있을까?
```js
let str = "Hello";

str.test = 5;

alert(str.test);
```
<details>
  <summary>결과</summary>
  1. undefined (비엄격)
  2. An error (엄격)
  
  ### 과정
  1. `str`의 프로퍼티에 접근하려 하면 `래퍼 객체`가 만들어짐
  2. 엄격 모드에선 래퍼 객체를 수정하려 할 때 에러 발생
  3. 비 엄격 모드에선 래퍼 객체에 프로퍼티 `test`가 추가됨. 근데 바로 삭제되기 때문에 alert 부분에서 호출해도 undefined가 됨
</details>

