# JSON과 메서드
자바스크립트에서는 객체를 문자열로 바꿔주는 친절한 기능을 제공해준다^^
지금부터 그 방법에 대해 알아보자~

### JSON.stringify
JSON은 값이나 객체를 나타내는 범용 포맷이다. 자바스크립트뿐만 아니라 다른 언어에서도 JSON을 다루기가 쉬워 데이터 교환 목적으로 많이 사용한다.
JSON 관련 메서드는 아래와 같다.
* `JSON.stringify` - 객체를 JSON으로 바꿔준다.
* `JSON.parse` - JSON을 객체로 바꿔준다.

예제 코드는 아래와 같다.
```js
let student = {
  name: 'John',
  age: 30,
  isAdmin: false,
  courses: ['html', 'css', 'js'],
  wife: null
};

let json = JSON.stringify(student);

console.log(typeof json); // 문자열이네요!

console.log(json);
/* JSON으로 인코딩된 객체:
{
  "name": "John",
  "age": 30,
  "isAdmin": false,
  "courses": ["html", "css", "js"],
  "wife": null
}
*/
```
`JSON.stringify`를 호출해서 바꾼 문자열은 JSON으로 인코딩된, 직렬화된, 문자열로 변환된, 결집된 객체라고 부른다.
JSON으로 인코딩된 객체는 일반 객체와 다른 특징을 보인다.
* 문자열은 큰따옴표로 감싸야 한다. 작은따옴표나 백틱을 사용할 수 없다!
* 객체 프로퍼티 이름은 큰따옴표로 감싸야 한다.

적용 가능한 자료형은 아래와 같다.
* 객체 ( 중첩 객체 포함 )
* 배열
* 원시형(문자형, 숫자형, 불린형, null)

무시되는 자료형은 아래와 같다.
* 함수
* 심볼형
* undefined
```js
let user = {
  sayHi() { // 무시
    alert("Hello");
  },
  [Symbol("id")]: 123, // 무시
  something: undefined // 무시
};

console.log( JSON.stringify(user) ); // {} (빈 객체가 출력됨)
```

순환 참조의 경우 문자열로 바꾸는게 불가능하다.
```js
let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  participants: ["john", "ann"]
};

meetup.place = room;       // meetup은 room을 참조합니다.
room.occupiedBy = meetup; // room은 meetup을 참조합니다.

JSON.stringify(meetup); // Error: Converting circular structure to JSON
```

### replacer로 원하는 프로퍼티만 직렬화하기
`JSON.stringify`의 전체 문법은 아래와 같다.
```js
/**
* value : 인코딩 하려는 값
* replacer : JSON으로 인코딩 하길 원하는 프로퍼티가 담긴 배열, 또는 매핑 함수(function(key, value))
* space : 서식 변경 목적으로 사용할 공백 문자 수
*/

let json = JSON.stringify(value[, replacer, space])
```

보통은 인수 하나만 넘겨서 사용하지만 순환 참조를 다뤄야 하는 경우 두 번째 인수도 사용한다.

```js
let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  participants: [{name: "John"}, {name: "Alice"}],
  place: room // meetup은 room을 참조합니다.
};

room.occupiedBy = meetup; // room references meetup

console.log( JSON.stringify(meetup, ['title', 'participants']) );
// 규칙이 까다로워 participants는 나오지 않는다.
// {"title":"Conference","participants":[{},{}]}
```

replacer로 원하는 것만 직렬화 해보자!
```js
let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  participants: [{name: "John"}, {name: "Alice"}],
  place: room // meetup은 room을 참조합니다
};

room.occupiedBy = meetup; // room은 meetup을 참조합니다

alert( JSON.stringify(meetup, function replacer(key, value) {
  alert(`${key}: ${value}`);
  // occupiedBy는 제외하고 직렬화
  return (key == 'occupiedBy') ? undefined : value;
}));

/* replacer 함수에서 처리하는 키:값 쌍 목록
:             [object Object]
title:        Conference
participants: [object Object],[object Object]
0:            [object Object]
name:         John
1:            [object Object]
name:         Alice
place:        [object Object]
number:       23
*/
// 콘솔로 나오는 것 : {"title":"Conference","participants":[{"name":"John"},{"name":"Alice"}],"place":{"number":23}}
```

### space로 가독성 높이기
`JSON.stringify(value, replacer, space)`의 세 번째 인수 `space`는 가독성을 높이기 위해 중간에 삽입해줄 공백 문자 수를 나타낸다.
가독성이 필요없다면 그냥 없이 직렬화 하면 된다.
```js
let user = {
  name: "John",
  age: 25,
  roles: {
    isAdmin: false,
    isEditor: true
  }
};

console.log(JSON.stringify(user, null, 2));
/* 공백 문자 두 개를 사용하여 들여쓰기함:
{
  "name": "John",
  "age": 25,
  "roles": {
    "isAdmin": false,
    "isEditor": true
  }
}
*/

/* JSON.stringify(user, null, 4)라면 아래와 같이 좀 더 들여써집니다.
{
    "name": "John",
    "age": 25,
    "roles": {
        "isAdmin": false,
        "isEditor": true
    }
}
*/
```

